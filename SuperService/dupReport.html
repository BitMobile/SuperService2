<html>
  <body>
    <h1>Statistics</h1>
    <p>Total codebase size: 47109</p>
    <p>Code to analyze: 492</p>
    <p>Total size of duplicated fragments: 1071</p>
    <h1>Detected Duplicates</h1>
    <h2>Duplicated Code. Size: 118</h2>
    <h3>Duplicated Fragments:</h3>
    <p>Fragment 1  in file SuperService\Module\DBHelper.UpdateInsert.cs 
                        (lines 86 - 91)</p>
    <pre>query.AddParameter("id", $"@ref[Document_Reminder]:{Guid.NewGuid()}");
            query.AddParameter("date", DateTime.Now.ToString(DateTimeFormat));
            query.AddParameter("eventId", eventID);
            query.AddParameter("message", message);
            query.Execute();
            _db.Commit();</pre>
    <p>Fragment 2  in file SuperService\Module\DBHelper.UpdateInsert.cs 
                        (lines 114 - 119)</p>
    <pre>query.AddParameter("id", $"@ref[Document_Reminder]:{Guid.NewGuid()}");
            query.AddParameter("date", DateTime.Now.ToString(DateTimeFormat));
            query.AddParameter("eventId", eventID);
            query.AddParameter("message", message);
            query.Execute();
            _db.Commit();</pre>
    <h2>Duplicated Code. Size: 114</h2>
    <h3>Duplicated Fragments:</h3>
    <p>Fragment 1  in file SuperService\Controllers\CheckListScreen.cs 
                        (lines 97 - 103)</p>
    <pre>{
            _textView.Text = args.Result.Value;
            DBHelper.UpdateCheckListItem(_currentCheckListItemID,
                args.Result.Value == Translator.Translate("not_choosed") ? "" : _textView.Text);
            _textView.Refresh();
            ChangeRequiredIndicator(_lastClickedRequiredIndicatior, args.Result.Value == Translator.Translate("not_choosed"));
        }</pre>
    <p>Fragment 2  in file SuperService\Controllers\CheckListScreen.cs 
                        (lines 138 - 144)</p>
    <pre>{
            _textView.Text = args.Result.Value;
            DBHelper.UpdateCheckListItem(_currentCheckListItemID,
                args.Result.Value == Translator.Translate("not_choosed") ? "" : _textView.Text);
            ChangeRequiredIndicator(_lastClickedRequiredIndicatior, args.Result.Value == Translator.Translate("not_choosed"));
            _textView.Refresh();
        }</pre>
    <h2>Duplicated Code. Size: 87</h2>
    <h3>Duplicated Fragments:</h3>
    <p>Fragment 1  in file SuperService\Controllers\COCScreen.cs 
                        (lines 117 - 124)</p>
    <pre>internal void OpenDeleteButton_OnClick(object sender, EventArgs e)
        {
            //TODO: Обходной путь получения парента. Внимание!!!!! .
            var vl = (VerticalLayout) sender;
            var hl = (IHorizontalLayout3) vl.Parent;
            var shl = (ISwipeHorizontalLayout3) hl.Parent;
            ++shl.Index;
        }</pre>
    <p>Fragment 2  in file SuperService\Controllers\MaterialsRequestScreen.cs 
                        (lines 180 - 186)</p>
    <pre>internal void OpenDeleteButton_OnClick(object sender, EventArgs e)
        {
            var vl = (VerticalLayout) sender;
            var hl = (IHorizontalLayout3) vl.Parent;
            var shl = (ISwipeHorizontalLayout3) hl.Parent;
            ++shl.Index;
        }</pre>
    <h2>Duplicated Code. Size: 87</h2>
    <h3>Duplicated Fragments:</h3>
    <p>Fragment 1  in file SuperService\Controllers\CheckListScreen.cs 
                        (lines 148 - 154)</p>
    <pre>{
            _editText = (EditText)sender;
            _currentCheckListItemID = ((EditText)sender).Id;

            DBHelper.UpdateCheckListItem(_currentCheckListItemID, _editText.Text);
            ChangeRequiredIndicator(_lastClickedRequiredIndicatior, string.IsNullOrWhiteSpace(_editText.Text));
        }</pre>
    <p>Fragment 2  in file SuperService\Controllers\CheckListScreen.cs 
                        (lines 158 - 180)</p>
    <pre>{
            _editText = (EditText)sender;
            _currentCheckListItemID = ((EditText)sender).Id;

            //var vl1 = (IHorizontalLayout3)_editText.Parent;
            //var hl = (IVerticalLayout3)vl1.Parent;
            //var vl2 = (IHorizontalLayout3)hl.Parent;
            //var vltarget = (IVerticalLayout3)vl2.Controls[0];

            //if (_editText.Text.Length &gt; 0)
            //{
            //    vltarget.CssClass = "VLRequiredDone";
            //    vltarget.Refresh();
            //}
            //else
            //{
            //    vltarget.CssClass = "VLRequired";
            //    vltarget.Refresh();
            //}

            DBHelper.UpdateCheckListItem(_currentCheckListItemID, _editText.Text);
            ChangeRequiredIndicator(_lastClickedRequiredIndicatior, string.IsNullOrWhiteSpace(_editText.Text));
        }</pre>
    <p>Fragment 3  in file SuperService\Controllers\CheckListScreen.cs 
                        (lines 184 - 219)</p>
    <pre>{
            _editText = (EditText)sender;
            _currentCheckListItemID = ((EditText)sender).Id;

            //var vl = (IVerticalLayout3)_editText.Parent;
            //var hl = (IHorizontalLayout3)vl.Parent;
            //var vltarget = (IVerticalLayout3) hl.Controls[0];

            //DConsole.WriteLine("CSS " + vltarget.CssClass.ToString());

            //vltarget.CssClass = "VLRequiredDone";
            //DConsole.WriteLine("1");
            //vltarget.Refresh();

            //DConsole.WriteLine("CSS " + vltarget.CssClass.ToString());

            //if (vltarget.CssClass == "VLRequiredDone" || vltarget.CssClass == "VLRequired")
            //{
            //    DConsole.WriteLine("1");
            //    if (_editText.Text.Length &gt; 0)
            //    {
            //        DConsole.WriteLine("2");
            //        vltarget.CssClass = "VLRequiredDone";
            //        vltarget.Refresh();
            //    }
            //    else
            //    {
            //        DConsole.WriteLine("3");
            //        vltarget.CssClass = "VLRequired";
            //        vltarget.Refresh();
            //    }
            //}
            // TODO: Непонятное поведение Refresh(), из-за чего не можем оперативно сменить индикатор важности. Работает на android 4, не работает на android 6
            DBHelper.UpdateCheckListItem(_currentCheckListItemID, _editText.Text);
            ChangeRequiredIndicator(_lastClickedRequiredIndicatior, string.IsNullOrWhiteSpace(_editText.Text));
        }</pre>
    <h2>Duplicated Code. Size: 86</h2>
    <h3>Duplicated Fragments:</h3>
    <p>Fragment 1  in file SuperService\Module\DBHelper.UpdateInsert.cs 
                        (lines 24 - 28)</p>
    <pre>DConsole.WriteLine($"{dateTime}");
            query.AddParameter("dateTime", dateTime.ToString(DateTimeFormat));
            query.AddParameter("id", eventId);
            query.Execute();
            _db.Commit();</pre>
    <p>Fragment 2  in file SuperService\Module\DBHelper.UpdateInsert.cs 
                        (lines 44 - 48)</p>
    <pre>DConsole.WriteLine($"{dateTime}");
            query.AddParameter("dateTime", dateTime.ToString(DateTimeFormat));
            query.AddParameter("id", eventId);
            query.Execute();
            _db.Commit();</pre>
  </body>
</html>