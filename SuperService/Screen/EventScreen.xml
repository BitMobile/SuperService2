<?xml version="1.0" encoding="utf-8"?>

<c:Screen xmlns:c="BitMobile.ClientModel3.UI" xmlns:s="BitMobile.ValueStack">
  <c:DockLayout Id="RootLayout" CssClass="RootLayout">
    <s:Push Id="event" Value="$GetCurrentEvent()" />
    <s:Include File="Components\TopInfoComponent.xml" />
    <s:If Test="$IsNotEmptyDateTime($event.ActualEndDate)">
      <s:If Test="$IsEmptyDateTime($event.ActualStartDate)">
        <c:Button Id="StartFinishButton" Text="#finish#" CssClass="NoHeight" OnClick="StartFinishButton_OnClick" />
      </s:If>
      <s:Else>
        <c:Button Id="StartFinishButton" Text="#finish#" CssClass="FinishButton" OnClick="StartFinishButton_OnClick" />
      </s:Else>
    </s:If>
    <c:SwipeVerticalLayout CssClass="EventScreenMainLayout">
      <c:HorizontalLayout CssClass="LightInfoLayout">
        <c:VerticalLayout CssClass="LightInfoBox">
          <c:TextView Text="#time#" CssClass="LightInfoTitle" />
          <c:TextView Text="$FormatEventStartDatePlanTime($event.StartDatePlanTime)" Id="StartTimeTextView"
                      CssClass="LightInfoContent" />
        </c:VerticalLayout>
        <c:VerticalLayout CssClass="LightInfoBox">
          <c:TextView Text="#workType#" CssClass="LightInfoTitle" />
          <c:TextView Text="$event.TypeDeparture" Id="DepartureTypeTextView" CssClass="LightInfoContent" />
        </c:VerticalLayout>
      </c:HorizontalLayout>
      <c:HorizontalLine CssClass="LayoutBreaker" />
      <c:VerticalLayout CssClass="CommentLayout">
        <c:TextView Text="#comment#" CssClass="LightInfoTitle" />
        <c:TextView Text="$event.Comment" Id="EventCommentTextView" CssClass="LightInfoContent" />
      </c:VerticalLayout>
      <c:HorizontalLine CssClass="LayoutBreaker" />
      <c:TextView Visible="False" />
      <c:HorizontalLayout CssClass="InfoLayout" OnClick="TaskCounterLayout_OnClick">
        <c:Image Source="Image\es_tasks.png" CssClass="InfoImage" />
        <c:TextView Text="#tasks#" Id="TaskCounterNameTextView" CssClass="InfoTitle" />
        <c:TextView Text="$GetStringPartOfTotal($event.equipmentAnswered, $event.equipmentTotal)"
                    Id="TaskCounterTextView" CssClass="InfoContent" />
      </c:HorizontalLayout>
      <c:HorizontalLayout CssClass="InfoLayout">
        <c:Image Source="Image\es_coc.png" CssClass="InfoImage" />
        <c:TextView Text="#coc#" Id="CertificateOfCompletionNameTextView" CssClass="InfoTitle" />
        <c:TextView Text="$event.sumFact" Id="CertificateOfCompletionTextView" CssClass="InfoContent" />
      </c:HorizontalLayout>
      <c:HorizontalLayout CssClass="InfoLayout">
        <c:Image Source="Image\es_clist.png" CssClass="InfoImage" />
        <c:TextView Text="#clist#" Id="CheckListCounterNameTextView" CssClass="InfoTitle" />
        <c:TextView Text="$GetStringPartOfTotal($event.checkListAnswered, $event.checkListTotal)"
                    Id="CheckListCounterTextView" CssClass="InfoContent" />
      </c:HorizontalLayout>

      <s:If Test="$IsEmptyDateTime($event.ActualStartDate)">
        <c:HorizontalLayout CssClass="EmptySpace2sp" />
        <c:Button Id="StartButton" Text="#start#" CssClass="StartButton" OnClick="StartButton_OnClick" />
        <c:Button Id="RefuseButton" Text="#refuse#" CssClass="RefuseButton" OnClick="RefuseButton_OnClick" />
        <c:HorizontalLayout CssClass="EmptySpace5sp" />
      </s:If>
    </c:SwipeVerticalLayout>
  </c:DockLayout>
</c:Screen>