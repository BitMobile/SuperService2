<?xml version="1.0" encoding="utf-8"?>

<c:Screen xmlns:c="BitMobile.ClientModel3.UI" xmlns:s="BitMobile.ValueStack">
  <c:VerticalLayout CssClass="RootLayout">

    <s:Include File="Components\TopInfoComponent.xml" />

    <c:SwipeVerticalLayout CssClass="CheckListMainSVL">

      <s:Iterator Id="CheckList" Value="$GetCheckList()">
        <c:HorizontalLayout Id="$CheckList.CheckListId" CssClass="CheckListItemHL">

          <!--Индикатор обязательности-->
          <s:If Test="$CheckList.Required">
            <s:If Test="$IsNotEmptyString($CheckList.Result)">
              <c:VerticalLayout CssClass="CheckListRequiredDoneVL" Id="VLRequired" />
            </s:If>
            <s:Else>
              <c:VerticalLayout CssClass="CheckListRequiredVL" Id="VLRequired" />
            </s:Else>
          </s:If>

          <s:Else>
            <c:VerticalLayout CssClass="CheckListNotRequiredVL" />
          </s:Else>

          <!--ФОТО-->
          <s:If Test="$CheckList.TypeName == Snapshot">
            <c:VerticalLayout CssClass="CheckListQuestionVL">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
            </c:VerticalLayout>

            <c:VerticalLayout CssClass="CheckListAnswerVL" Id="$CheckList.CheckListId"
                              OnClick="CheckListSnapshot_OnClick">
              <c:Image Source="$GetResourceImage(checklistscreen_photo)" Id="$CheckList.CheckListId"
                       CssClass="CheckListAnswerImage" />
            </c:VerticalLayout>
          </s:If>

          <!--СПИСОК-->
          <s:If Test="$CheckList.TypeName == ValList">
            <c:VerticalLayout CssClass="CheckListQuestionVL">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
            </c:VerticalLayout>

            <c:VerticalLayout CssClass="CheckListAnswerVL" Id="$CheckList.CheckListId"
                              OnClick="CheckListValList_OnClick">
              <s:If Test="$IsNotEmptyString($CheckList.Result)">
                <c:TextView Visible="true" Text="$CheckList.Result" Id="$CheckList.ActionId"
                            CssClass="CheckListAnswerElement" />
              </s:If>
              <s:Else>
                <c:TextView Visible="true" Text="#not_choosed#" Id="$CheckList.ActionId"
                            CssClass="CheckListAnswerElement" />
              </s:Else>
            </c:VerticalLayout>
          </s:If>

          <!--ДАТА-->
          <s:If Test="$CheckList.TypeName == DateTime">
            <c:VerticalLayout CssClass="CheckListQuestionVL">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
            </c:VerticalLayout>

            <c:VerticalLayout CssClass="CheckListAnswerVL" Id="$CheckList.CheckListId"
                              OnClick="CheckListDateTime_OnClick">
              <s:If Test="$IsNotEmptyString($CheckList.Result)">
                <c:TextView Visible="true" Text="$ToDate($CheckList.Result)" CssClass="CheckListAnswerElement" />
              </s:If>
              <s:Else>
                <c:TextView Visible="true" Text="#not_specified#" CssClass="CheckListAnswerElement" />
              </s:Else>
            </c:VerticalLayout>
          </s:If>

          <!--БУЛЕВО-->


          <s:If Test="$CheckList.TypeName == Boolean">
            <c:VerticalLayout CssClass="CheckListQuestionVL">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
            </c:VerticalLayout>

            <c:VerticalLayout CssClass="CheckListAnswerVL" Id="$CheckList.CheckListId"
                              OnClick="CheckListBoolean_OnClick">
              <s:If Test="$CheckList.Result == Да">
                <c:TextView Text="#yes#" Id="$CheckList.ActionId"
                            CssClass="CheckListAnswerElement" />
              </s:If>
              
              <s:Else>
                <s:If Test="$CheckList.Result == Нет">
                  <c:TextView Text="#no#" Id="$CheckList.ActionId"
                              CssClass="CheckListAnswerElement" />
                </s:If>
              </s:Else>
              
              <s:Else>
                <c:TextView Text="#not_choosed#" Id="$CheckList.ActionId"
                            CssClass="CheckListAnswerElement" />
              </s:Else>
            </c:VerticalLayout>
          </s:If>

          <!--С ТОЧКОЙ-->
          <s:If Test="$CheckList.TypeName == Decimal">
            <c:VerticalLayout CssClass="CheckListQuestionVL">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
            </c:VerticalLayout>

            <c:VerticalLayout CssClass="CheckListAnswerVL" Id="$CheckList.CheckListId">
              <c:EditText Enabled="true" Text="$CheckList.Result" Keyboard="numeric" Mask="^([0-9]*\.[0-9]+)$"
                          OnLostFocus="CheckListDecimal_OnLostFocus" Id="$CheckList.CheckListId"
                          Placeholder="#not_specified#" CssClass="CheckListAnswerElement" />
            </c:VerticalLayout>
          </s:If>

          <!--ЦЕЛОЕ-->
          <s:If Test="$CheckList.TypeName == Integer">
            <c:VerticalLayout CssClass="CheckListQuestionVL">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
            </c:VerticalLayout>

            <c:VerticalLayout CssClass="CheckListAnswerVL" Id="$CheckList.CheckListId">
              <c:EditText Enabled="true" Text="$CheckList.Result" Keyboard="numeric" Mask="^[1-9]\d*$"
                          OnLostFocus="CheckListInteger_OnLostFocus" Id="$CheckList.CheckListId"
                          Placeholder="#not_specified#" CssClass="CheckListAnswerElement" />
            </c:VerticalLayout>
          </s:If>

          <!--СТРОКА-->
          <s:If Test="$CheckList.TypeName == String">
            <c:VerticalLayout CssClass="CheckListStringVL" Id="$CheckList.CheckListId">
              <c:TextView Text="$CheckList.Description" CssClass="CheckListDescriptionTV" />
              <c:EditText Enabled="True" Text="$CheckList.Result" Placeholder="#text#" CssClass="CheckListStringET"
                          OnLostFocus="CheckListString_OnLostFocus" Id="$CheckList.CheckListId" />
            </c:VerticalLayout>
          </s:If>

        </c:HorizontalLayout>
        <c:HorizontalLine CssClass="CheckListBreaker" />
      </s:Iterator>

    </c:SwipeVerticalLayout>

  </c:VerticalLayout>
</c:Screen>